var posts=[{id:1,date:"2016-01-09T22:05:09",modified:"2016-01-09T22:05:09",slug:"hello-world",type:"post",title:"Hello world!",content:"Welcome to WordPress. This is your first post. Edit or delete it, then start writing!"},{id:2,date:"2016-01-10T22:05:09",modified:"2016-01-10T22:05:09",slug:"learning-javascript",type:"post",title:"Learning JavaScript!",content:"I'm learning JavaScript and super excited!!!"},{id:3,date:"2016-01-11T22:05:09",modified:"2016-01-11T22:05:09",slug:"rest-api",type:"post",title:"The REST API!",content:"I've started working with the REST API in WordPress, what fun!"},{id:4,date:"2016-01-12T22:05:09",modified:"2016-01-12T22:05:09",slug:"json-data",type:"post",title:"JSON Data!",content:"So, with the REST API it is posible to pull in WordPress data as pure JSON.  Now I'm figuring out what to do with the data"},{id:5,date:"2016-01-13T22:05:09",modified:"2016-01-13T22:05:09",slug:"javascript-project",type:"post",title:"JavaScript Project",content:"I've started working with the REST API in WordPress, what fun!"}],pages=[{id:6,date:"2016-01-18T22:05:09",modified:"2016-01-18T22:05:09",slug:"home",type:"page",title:"Home",content:"Welcome to VanillaPress, my JavaScript site!"},{id:7,date:"2016-01-18T22:05:09",modified:"2016-01-18T22:05:09",slug:"about",type:"page",title:"About",content:"A little about me!"},{id:8,date:"2016-01-18T22:05:09",modified:"2016-01-18T22:05:09",slug:"blog",type:"page",title:"Blog",content:"Please enjoy my posts"},{id:9,date:"2016-01-18T22:05:09",modified:"2016-01-18T22:05:09",slug:"contact",type:"page",title:"Contact",content:"Drop me a line with any questions :)"}],settings={editorHidden:"true"},data={posts:posts,pages:pages,settings:settings},helpers={};helpers.createMenuItem=function(e){var t=document.createElement("li");return t.appendChild(helpers.createLink(e)),t},helpers.createLink=function(e){var t=document.createElement("a"),n=document.createTextNode(e.title);return"home"!==e.slug?t.href="#"+e.slug:t.href="#",t.appendChild(n),t},helpers.getMainMenuEl=function(){return document.querySelector("#mainNav ul")},helpers.getPageTitleEl=function(){return document.getElementById("pageTitle")},helpers.getLinks=function(){return document.querySelectorAll("a")},helpers.getPageContentEl=function(){return document.getElementById("pageContent")},helpers.getEditorEl=function(){return document.getElementById("editor")},helpers.getEditorToggleEl=function(){return document.getElementById("editorToggle")},helpers.getEditorToggleLink=function(){return document.querySelector("#editorToggle a")},helpers.getEditorTitleEl=function(){return document.getElementById("editTitle")},helpers.getEditorContentEl=function(){return document.getElementById("editContent")},helpers.getEditorUpdateBtnEl=function(){return document.getElementById("editUpdateBtn")};var model={};model.init=function(){!1===model.checkLocalStore()&&model.updateLocalStore(data)},model.getContent=function(e){var t=model.getPost(e);return null===t&&(t=model.getPage(e)),null===t&&(t={title:"404 Error",content:"Content not found"}),t},model.getCurrentContent=function(){var e=router.getSlug(),t=model.getContent(e);return t},model.getPosts=function(){var e=model.getLocalStore().posts;return e},model.getPost=function(e){var t=model.getLocalStore().posts;for(i=0,max=t.length;i<max;i++)if(e===t[i].slug)return t[i];return null},model.getPages=function(){var e=model.getLocalStore().pages;return e},model.getPage=function(e){var t=model.getLocalStore().pages;for(null===e&&(e="home"),i=0,max=t.length;i<max;i++)if(e===t[i].slug)return t[i];return null},model.updateContent=function(e){var t=model.getLocalStore(),n=new Date;"post"===e.type&&t.posts.forEach(function(t){e.id===t.id&&(t.title=e.title,t.content=e.content,t.modified=n.toISOString())}),"page"===e.type&&t.pages.forEach(function(t){e.id===t.id&&(t.title=e.title,t.content=e.content,t.modified=n.toISOString())}),model.updateLocalStore(t)},model.updateEditorHidden=function(e){var t=model.getLocalStore();t.settings.editorHidden=e,model.updateLocalStore(t)},model.getEditorHidden=function(){var e=model.getLocalStore();return e.settings.editorHidden},model.checkLocalStore=function(){var e=model.getLocalStore();return null!==e},model.getLocalStore=function(){var e=JSON.parse(localStorage.getItem("vanillaPress"));return e},model.updateLocalStore=function(e){localStorage.setItem("vanillaPress",JSON.stringify(e))},model.removeLocalStore=function(){localStorage.removeItem("vanillaPress")};var router={};router.init=function(){router.loadContent(),router.listenPageChange()},router.getSlug=function(){return slug=window.location.hash,""===slug?null:slug.substr(1)},router.listenPageChange=function(){window.addEventListener("hashchange",router.loadContent,!1)},router.loadContent=function(){var e=router.getSlug(),t=model.getContent(e),n=helpers.getEditorEl();view.clearContent(),null===e?view.loadSingleContent("home"):"blog"===e?view.loadBlogPosts():view.loadSingleContent(e),editor.currentContent=t,!1===n.classList.contains("hidden")&&editor.loadEditForm(editor.currentContent)};var view={};view.init=function(){view.createMainMenu()},view.loadBlogPosts=function(){var e,t,n=model.getPosts(),o=document.createDocumentFragment(),i=helpers.getPageTitleEl(),r=helpers.getPageContentEl();for(e=0,t=n.length;e<t;e++)o.appendChild(view.createPostMarkup(n[e]));r.appendChild(o),i.innerHTML="Blog Posts"},view.loadSingleContent=function(e){var t=model.getContent(e),n=helpers.getPageTitleEl(),o=helpers.getPageContentEl();n.innerHTML=t.title,o.innerHTML=t.content},view.updateTitleAndContent=function(e){view.updateTitle(e.title),view.updateContent(e.content)},view.updateTitle=function(e){var t=helpers.getPageTitleEl();t.innerHTML=e},view.updateContent=function(e){var t=helpers.getPageContentEl();t.innerHTML=e},view.clearContent=function(){var e=helpers.getPageTitleEl(),t=helpers.getPageContentEl();e.innerHTML="",t.innerHTML=""},view.createMainMenu=function(){var e,t,n=model.getPages(),o=document.createDocumentFragment(),i=helpers.getMainMenuEl();for(e=0,t=n.length;e<t;e++)o.appendChild(helpers.createMenuItem(n[e]));i.appendChild(o)},view.createPostMarkup=function(e){var t=document.createElement("article"),n=document.createElement("h3"),o=helpers.createLink(e),i=document.createElement("div");return n.appendChild(o),i.appendChild(document.createTextNode(e.content)),t.appendChild(n),t.appendChild(i),t};var editor={};editor.currentContent="",editor.unSavedContent=!1,editor.init=function(){editor.listenEditorToggle(),editor.checkEditorHidden()},editor.updateContent=function(){event.preventDefault(),model.updateContent(editor.currentContent),editor.unSavedContent=!1,editor.animateSaveBtn()},editor.updateTitle=function(){var e=helpers.getEditorTitleEl().value;editor.currentContent.title=e,editor.unSavedContent=!0,view.updateTitle(e)},editor.updateMainContent=function(){var e=helpers.getEditorContentEl().value;editor.currentContent.content=e,editor.unSavedContent=!0,view.updateContent(e)},editor.loadEditForm=function(e){var t=helpers.getEditorTitleEl(),n=helpers.getEditorContentEl();t.value=e.title,n.value=e.content,"blog"===e.slug?n.setAttribute("readonly","readonly"):n.removeAttribute("readonly"),editor.addFormListeners()},editor.animateSaveBtn=function(){var e=helpers.getEditorUpdateBtnEl(),t=function(){setTimeout(function(){e.innerText="Update"},1e3)};saving=function(){setTimeout(function(){e.innerText="Saved!",t()},900)},e.innerText="Saving...",saving()},editor.addFormListeners=function(){var e=helpers.getEditorTitleEl(),t=helpers.getEditorContentEl(),n=helpers.getEditorUpdateBtnEl(),o=helpers.getLinks();e.addEventListener("input",editor.updateTitle,!1),t.addEventListener("input",editor.updateMainContent,!1),n.addEventListener("click",editor.updateContent,!1),o.forEach(function(e){e.addEventListener("click",editor.protectUnsavedContent,!1)})},editor.protectUnsavedContent=function(){var e;!0===editor.unSavedContent&&(e=window.confirm("You have unsaved content"),!1===e?event.preventDefault():editor.unSavedContent=!1)},editor.listenEditorToggle=function(){var e=helpers.getEditorToggleLink();e.addEventListener("click",function(){editor.toggle(),event.preventDefault()},!1)},editor.checkEditorHidden=function(){var e=model.getEditorHidden();!1===e&&editor.toggle()},editor.toggle=function(){var e=helpers.getEditorEl(),t=helpers.getEditorToggleEl(),n=helpers.getLinks();editor.currentContent=model.getCurrentContent(),e.classList.toggle("hidden"),t.classList.toggle("hidden"),!1===t.classList.contains("hidden")?(editor.loadEditForm(editor.currentContent),model.updateEditorHidden(!1)):(model.updateEditorHidden(!0),n.forEach(function(e){e.removeEventListener("click",editor.protectUnsavedContent,!1)}))};var vanillaPress={};vanillaPress.init=function(){model.init(),router.init(),view.init(),editor.init(),console.log("Testing 2")},vanillaPress.init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGEuanMiLCJoZWxwZXJzLmpzIiwibW9kZWwuanMiLCJyb3V0ZXIuanMiLCJ2aWV3LmpzIiwiZWRpdG9yLmpzIiwiYXBwLmpzIl0sIm5hbWVzIjpbInBvc3RzIiwiaWQiLCJkYXRlIiwibW9kaWZpZWQiLCJzbHVnIiwidHlwZSIsInRpdGxlIiwiY29udGVudCIsInBhZ2VzIiwic2V0dGluZ3MiLCJlZGl0b3JIaWRkZW4iLCJkYXRhIiwiaGVscGVycyIsImNyZWF0ZU1lbnVJdGVtIiwiY29udGVudE9iaiIsIm1lbnVJdGVtRWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUxpbmsiLCJsaW5rRWwiLCJsaW5rVGl0bGUiLCJjcmVhdGVUZXh0Tm9kZSIsImhyZWYiLCJnZXRNYWluTWVudUVsIiwicXVlcnlTZWxlY3RvciIsImdldFBhZ2VUaXRsZUVsIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRMaW5rcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJnZXRQYWdlQ29udGVudEVsIiwiZ2V0RWRpdG9yRWwiLCJnZXRFZGl0b3JUb2dnbGVFbCIsImdldEVkaXRvclRvZ2dsZUxpbmsiLCJnZXRFZGl0b3JUaXRsZUVsIiwiZ2V0RWRpdG9yQ29udGVudEVsIiwiZ2V0RWRpdG9yVXBkYXRlQnRuRWwiLCJtb2RlbCIsImluaXQiLCJjaGVja0xvY2FsU3RvcmUiLCJ1cGRhdGVMb2NhbFN0b3JlIiwiZ2V0Q29udGVudCIsImdldFBvc3QiLCJnZXRQYWdlIiwiZ2V0Q3VycmVudENvbnRlbnQiLCJyb3V0ZXIiLCJnZXRTbHVnIiwiZ2V0UG9zdHMiLCJnZXRMb2NhbFN0b3JlIiwiaSIsIm1heCIsImxlbmd0aCIsImdldFBhZ2VzIiwidXBkYXRlQ29udGVudCIsInN0b3JlIiwiRGF0ZSIsImZvckVhY2giLCJwb3N0IiwidG9JU09TdHJpbmciLCJwYWdlIiwidXBkYXRlRWRpdG9ySGlkZGVuIiwiaXNIaWRkZW4iLCJnZXRFZGl0b3JIaWRkZW4iLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInJlbW92ZUxvY2FsU3RvcmUiLCJyZW1vdmVJdGVtIiwibG9hZENvbnRlbnQiLCJsaXN0ZW5QYWdlQ2hhbmdlIiwid2luZG93IiwibG9jYXRpb24iLCJoYXNoIiwic3Vic3RyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInVybCIsImVkaXRvckVsIiwidmlldyIsImNsZWFyQ29udGVudCIsImxvYWRTaW5nbGVDb250ZW50IiwibG9hZEJsb2dQb3N0cyIsImVkaXRvciIsImN1cnJlbnRDb250ZW50IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJsb2FkRWRpdEZvcm0iLCJjcmVhdGVNYWluTWVudSIsInBvc3RzTWFya3VwIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsInRpdGxlRWwiLCJjb250ZW50RWwiLCJjcmVhdGVQb3N0TWFya3VwIiwiaW5uZXJIVE1MIiwidXBkYXRlVGl0bGVBbmRDb250ZW50IiwidXBkYXRlVGl0bGUiLCJtZW51TWFya3VwIiwibWFpbk1lbnVFbCIsImFydGljbGVFbCIsInRpdGxlTGluayIsInVuU2F2ZWRDb250ZW50IiwibGlzdGVuRWRpdG9yVG9nZ2xlIiwiY2hlY2tFZGl0b3JIaWRkZW4iLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiYW5pbWF0ZVNhdmVCdG4iLCJ2YWx1ZSIsInVwZGF0ZU1haW5Db250ZW50IiwidGl0bGVGb3JtIiwiY29udGVudEZvcm0iLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJhZGRGb3JtTGlzdGVuZXJzIiwiYnRuIiwic2F2ZWQiLCJzZXRUaW1lb3V0IiwiaW5uZXJUZXh0Iiwic2F2aW5nIiwidGl0bGVGaWVsZCIsImNvbnRlbnRGaWVsZCIsInVwZGF0ZUJ0biIsImxpbmtzIiwibGluayIsInByb3RlY3RVbnNhdmVkQ29udGVudCIsImNvbmZpcm0iLCJ0b2dnbGVFbCIsInRvZ2dsZSIsInJlbW92ZUV2ZW50TGlzdGVu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QUFPLFVBQUEwQyxPQUFBLFVBQ0FELEVBQUF6QyxVQUFBMEMsT0FBQSxXQUVBLElBQUFELEVBQUF6QyxVQUFBQyxTQUFBLFdBRUFILE9BQUFJLGFBQUFKLE9BQUFDLGdCQUNBaEQsTUFBQXVCLG9CQUFBLEtBSUF2QixNQUFBdUIsb0JBQUEsR0FFQStELEVBQUFuRSxRQUFBLFNBQUFvRSxHQUVBQSxFQUFBSyxvQkFDQSxRQUNBN0MsT0FBQXlDLHVCQUNBLE1DdE9BLElBQUFLLGdCQU9BQSxjQUFBNUYsS0FBQSxXQUVBRCxNQUFBQyxPQUNBTyxPQUFBUCxPQUNBMEMsS0FBQTFDLE9BQ0E4QyxPQUFBOUMsT0FDQTZGLFFBQUFDLElBQUEsY0FJQUYsYUFBQTVGIiwiZmlsZSI6ImJ1bmRsZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qKlxuICogTWFpbiBKU09OIG9iamVjdCBvZiBwb3N0cywgcGFnZXMgYW5kIHNldHRpbmdzXG4gKi9cbnZhciBwb3N0cyA9XG4gICAgW1xuICAgICAge1xuICAgICAgICBcImlkXCI6MSxcbiAgICAgICAgXCJkYXRlXCI6XCIyMDE2LTAxLTA5VDIyOjA1OjA5XCIsXG4gICAgICAgIFwibW9kaWZpZWRcIjpcIjIwMTYtMDEtMDlUMjI6MDU6MDlcIixcbiAgICAgICAgXCJzbHVnXCI6XCJoZWxsby13b3JsZFwiLFxuICAgICAgICBcInR5cGVcIjpcInBvc3RcIixcbiAgICAgICAgXCJ0aXRsZVwiOlwiSGVsbG8gd29ybGQhXCIsXG4gICAgICAgIFwiY29udGVudFwiOlwiV2VsY29tZSB0byBXb3JkUHJlc3MuIFRoaXMgaXMgeW91ciBmaXJzdCBwb3N0LiBFZGl0IG9yIGRlbGV0ZSBpdCwgdGhlbiBzdGFydCB3cml0aW5nIVwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBcImlkXCI6MixcbiAgICAgICAgXCJkYXRlXCI6XCIyMDE2LTAxLTEwVDIyOjA1OjA5XCIsXG4gICAgICAgIFwibW9kaWZpZWRcIjpcIjIwMTYtMDEtMTBUMjI6MDU6MDlcIixcbiAgICAgICAgXCJzbHVnXCI6XCJsZWFybmluZy1qYXZhc2NyaXB0XCIsXG4gICAgICAgIFwidHlwZVwiOlwicG9zdFwiLFxuICAgICAgICBcInRpdGxlXCI6XCJMZWFybmluZyBKYXZhU2NyaXB0IVwiLFxuICAgICAgICBcImNvbnRlbnRcIjpcIkknbSBsZWFybmluZyBKYXZhU2NyaXB0IGFuZCBzdXBlciBleGNpdGVkISEhXCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFwiaWRcIjozLFxuICAgICAgICBcImRhdGVcIjpcIjIwMTYtMDEtMTFUMjI6MDU6MDlcIixcbiAgICAgICAgXCJtb2RpZmllZFwiOlwiMjAxNi0wMS0xMVQyMjowNTowOVwiLFxuICAgICAgICBcInNsdWdcIjpcInJlc3QtYXBpXCIsXG4gICAgICAgIFwidHlwZVwiOlwicG9zdFwiLFxuICAgICAgICBcInRpdGxlXCI6XCJUaGUgUkVTVCBBUEkhXCIsXG4gICAgICAgIFwiY29udGVudFwiOlwiSSd2ZSBzdGFydGVkIHdvcmtpbmcgd2l0aCB0aGUgUkVTVCBBUEkgaW4gV29yZFByZXNzLCB3aGF0IGZ1biFcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJpZFwiOjQsXG4gICAgICAgIFwiZGF0ZVwiOlwiMjAxNi0wMS0xMlQyMjowNTowOVwiLFxuICAgICAgICBcIm1vZGlmaWVkXCI6XCIyMDE2LTAxLTEyVDIyOjA1OjA5XCIsXG4gICAgICAgIFwic2x1Z1wiOlwianNvbi1kYXRhXCIsXG4gICAgICAgIFwidHlwZVwiOlwicG9zdFwiLFxuICAgICAgICBcInRpdGxlXCI6XCJKU09OIERhdGEhXCIsXG4gICAgICAgIFwiY29udGVudFwiOlwiU28sIHdpdGggdGhlIFJFU1QgQVBJIGl0IGlzIHBvc2libGUgdG8gcHVsbCBpbiBXb3JkUHJlc3MgZGF0YSBhcyBwdXJlIEpTT04uICBOb3cgSSdtIGZpZ3VyaW5nIG91dCB3aGF0IHRvIGRvIHdpdGggdGhlIGRhdGFcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJpZFwiOjUsXG4gICAgICAgIFwiZGF0ZVwiOlwiMjAxNi0wMS0xM1QyMjowNTowOVwiLFxuICAgICAgICBcIm1vZGlmaWVkXCI6XCIyMDE2LTAxLTEzVDIyOjA1OjA5XCIsXG4gICAgICAgIFwic2x1Z1wiOlwiamF2YXNjcmlwdC1wcm9qZWN0XCIsXG4gICAgICAgIFwidHlwZVwiOlwicG9zdFwiLFxuICAgICAgICBcInRpdGxlXCI6XCJKYXZhU2NyaXB0IFByb2plY3RcIixcbiAgICAgICAgXCJjb250ZW50XCI6XCJJJ3ZlIHN0YXJ0ZWQgd29ya2luZyB3aXRoIHRoZSBSRVNUIEFQSSBpbiBXb3JkUHJlc3MsIHdoYXQgZnVuIVwiXG4gICAgICB9XG4gICAgXSxcbiAgICBwYWdlcyA9XG4gICAgW1xuICAgICAge1xuICAgICAgICBcImlkXCI6NixcbiAgICAgICAgXCJkYXRlXCI6XCIyMDE2LTAxLTE4VDIyOjA1OjA5XCIsXG4gICAgICAgIFwibW9kaWZpZWRcIjpcIjIwMTYtMDEtMThUMjI6MDU6MDlcIixcbiAgICAgICAgXCJzbHVnXCI6XCJob21lXCIsXG4gICAgICAgIFwidHlwZVwiOlwicGFnZVwiLFxuICAgICAgICBcInRpdGxlXCI6XCJIb21lXCIsXG4gICAgICAgIFwiY29udGVudFwiOlwiV2VsY29tZSB0byBWYW5pbGxhUHJlc3MsIG15IEphdmFTY3JpcHQgc2l0ZSFcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJpZFwiOjcsXG4gICAgICAgIFwiZGF0ZVwiOlwiMjAxNi0wMS0xOFQyMjowNTowOVwiLFxuICAgICAgICBcIm1vZGlmaWVkXCI6XCIyMDE2LTAxLTE4VDIyOjA1OjA5XCIsXG4gICAgICAgIFwic2x1Z1wiOlwiYWJvdXRcIixcbiAgICAgICAgXCJ0eXBlXCI6XCJwYWdlXCIsXG4gICAgICAgIFwidGl0bGVcIjpcIkFib3V0XCIsXG4gICAgICAgIFwiY29udGVudFwiOlwiQSBsaXR0bGUgYWJvdXQgbWUhXCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFwiaWRcIjo4LFxuICAgICAgICBcImRhdGVcIjpcIjIwMTYtMDEtMThUMjI6MDU6MDlcIixcbiAgICAgICAgXCJtb2RpZmllZFwiOlwiMjAxNi0wMS0xOFQyMjowNTowOVwiLFxuICAgICAgICBcInNsdWdcIjpcImJsb2dcIixcbiAgICAgICAgXCJ0eXBlXCI6XCJwYWdlXCIsXG4gICAgICAgIFwidGl0bGVcIjpcIkJsb2dcIixcbiAgICAgICAgXCJjb250ZW50XCI6XCJQbGVhc2UgZW5qb3kgbXkgcG9zdHNcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJpZFwiOjksXG4gICAgICAgIFwiZGF0ZVwiOlwiMjAxNi0wMS0xOFQyMjowNTowOVwiLFxuICAgICAgICBcIm1vZGlmaWVkXCI6XCIyMDE2LTAxLTE4VDIyOjA1OjA5XCIsXG4gICAgICAgIFwic2x1Z1wiOlwiY29udGFjdFwiLFxuICAgICAgICBcInR5cGVcIjpcInBhZ2VcIixcbiAgICAgICAgXCJ0aXRsZVwiOlwiQ29udGFjdFwiLFxuICAgICAgICBcImNvbnRlbnRcIjpcIkRyb3AgbWUgYSBsaW5lIHdpdGggYW55IHF1ZXN0aW9ucyA6KVwiXG4gICAgICB9XG4gICAgXSxcbiAgICBzZXR0aW5ncyA9IHtcbiAgICAgIFwiZWRpdG9ySGlkZGVuXCI6XCJ0cnVlXCJcbiAgICB9LFxuICAgIGRhdGEgPSB7XG4gICAgICBcInBvc3RzXCI6IHBvc3RzLFxuICAgICAgXCJwYWdlc1wiOiBwYWdlcyxcbiAgICAgIFwic2V0dGluZ3NcIjogc2V0dGluZ3NcbiAgICB9O1xuIiwiLyoqXG4gKiBIZWxwZXIgZmlsZSBmb3IgZXh0cmEgaGVscGVyIGZ1bmN0aW9uc1xuICovXG5cbi8qKlxuICogTWFpbiBoZWxwZXIgb2JqZWN0XG4gKi9cbnZhciBoZWxwZXJzID0ge307XG5cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBpdGVtIHdpdGggYSBsaW5rIGluc2lkZSBmb3IgbWVudXNcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGVudE9iaiBQYWdlIG9iamVjdCB0byBjcmVhdGUgbWVudSBpdGVtIGZvclxuICogQHJldHVybiB7T2JqZWN0fSBtZW51SXRlbUVsIExpc3QgaXRlbSBET00gb2JqZWN0XG4gKi9cbiBoZWxwZXJzLmNyZWF0ZU1lbnVJdGVtID0gZnVuY3Rpb24oIGNvbnRlbnRPYmogKSB7XG5cbiAgIHZhciBtZW51SXRlbUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2xpJyApO1xuXG4gICBtZW51SXRlbUVsLmFwcGVuZENoaWxkKCBoZWxwZXJzLmNyZWF0ZUxpbmsoIGNvbnRlbnRPYmogKSApO1xuXG4gICByZXR1cm4gbWVudUl0ZW1FbDtcblxuIH07XG5cbi8qKlxuICogQ3JlYXRlcyBsaW5rXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbnRlbnRPYmogQ29udGVudCBvYmplY3QgdG8gY3JlYXRlIGxpbmsgZm9yXG4gKiBAcmV0dXJuIHtPYmplY3R9IGxpbmtFbCBMaW5rIG9iamVjdFxuICovXG5oZWxwZXJzLmNyZWF0ZUxpbmsgPSBmdW5jdGlvbiggY29udGVudE9iaiApIHtcblxuICB2YXIgbGlua0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2EnICksXG4gICAgIGxpbmtUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCBjb250ZW50T2JqLnRpdGxlICk7XG5cbiAgaWYgKCAnaG9tZScgIT09IGNvbnRlbnRPYmouc2x1ZyApIHtcbiAgICBsaW5rRWwuaHJlZiA9ICcjJyArIGNvbnRlbnRPYmouc2x1ZztcbiAgfSBlbHNlIHtcbiAgICBsaW5rRWwuaHJlZiA9ICcjJztcbiAgfVxuICBsaW5rRWwuYXBwZW5kQ2hpbGQoIGxpbmtUaXRsZSApO1xuXG4gIHJldHVybiBsaW5rRWw7XG5cbn07XG5cbi8qKlxuICogR2V0cyB0aGUgbWFpbiBtZW51IGVsZW1lbnRcbiAqIEByZXR1cm4ge09iamVjdH0gTWFpbiBtZW51IERPTSBvYmplY3RcbiAqL1xuaGVscGVycy5nZXRNYWluTWVudUVsID0gZnVuY3Rpb24oKXtcbiByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJyNtYWluTmF2IHVsJyApO1xufTtcblxuLyoqXG4gKiBHZXRzIHBhZ2UgdGl0bGUgZnJvbSB0aGUgRE9NXG4gKiBAcmV0dXJuIHtPYmplY3R9IE1haW4gcGFnZSB0aXRsZSBET00gb2JqZWN0XG4gKi9cbmhlbHBlcnMuZ2V0UGFnZVRpdGxlRWwgPSBmdW5jdGlvbigpIHtcblxuICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdwYWdlVGl0bGUnICk7XG5cbn07XG5cbi8qKlxuICogR2V0IGxpbmtzIGluIHRoZSB2aWV3XG4gKiBAcmV0dXJuIHtPYmplY3R9IEFsbCBsaW5rcyBpbiB0aGUgdmlld1xuICovXG5oZWxwZXJzLmdldExpbmtzID0gZnVuY3Rpb24oKSB7XG5cbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICdhJyApO1xuXG59O1xuXG5cbi8qKlxuICogR2V0cyBwYWdlIGNvbnRlbnQgZnJvbSB0aGUgRE9NXG4gKiBAcmV0dXJuIHtPYmplY3R9IE1haW4gY29udGVudCBET00gb2JqZWN0XG4gKi9cbmhlbHBlcnMuZ2V0UGFnZUNvbnRlbnRFbCA9IGZ1bmN0aW9uKCkge1xuXG4gIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ3BhZ2VDb250ZW50JyApO1xuXG59O1xuXG4vKipcbiAqIEdldHMgZWRpdG9yIEVsZW1lbnQgaW4gdGhlIERPTVxuICogQHJldHVybiB7T2JqZWN0fSBNYWluIGVkaXRvciBET00gb2JqZWN0XG4gKi9cbmhlbHBlcnMuZ2V0RWRpdG9yRWwgPSBmdW5jdGlvbigpIHtcblxuICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdlZGl0b3InICk7XG5cbn07XG5cbi8qKlxuICogR2V0cyBlZGl0b3IgdG9nZ2xlIEVsZW1lbnQgaW4gdGhlIERPTVxuICogQHJldHVybiB7T2JqZWN0fSBNYWluIHRvZ2dsZSBlbGVtZW50XG4gKi9cbmhlbHBlcnMuZ2V0RWRpdG9yVG9nZ2xlRWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAnZWRpdG9yVG9nZ2xlJyApO1xufTtcblxuLyoqXG4gKiBHZXRzIGVkaXRvciB0b2dnbGUgbGluayBFbGVtZW50IGluIHRoZSBET01cbiAqIEByZXR1cm4ge09iamVjdH0gTWFpbiB0b2dnbGUgbGlua1xuICovXG5oZWxwZXJzLmdldEVkaXRvclRvZ2dsZUxpbmsgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcjZWRpdG9yVG9nZ2xlIGEnICk7XG59O1xuXG4vKipcbiAqIEdldHMgZWRpdG9yIHRpdGxlIGZvcm0gZWxlbWVudFxuICogQHJldHVybiB7T2JqZWN0fSBUaXRsZSBmb3JtIGVsZW1lbnRcbiAqL1xuaGVscGVycy5nZXRFZGl0b3JUaXRsZUVsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2VkaXRUaXRsZScgKTtcbn07XG5cbi8qKlxuICogR2V0cyBlZGl0b3IgY29udGVudCBmb3JtIGVsZW1lbnRcbiAqIEByZXR1cm4ge09iamVjdH0gQ29udGVudCBmb3JtIGVsZW1lbnRcbiAqL1xuaGVscGVycy5nZXRFZGl0b3JDb250ZW50RWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAnZWRpdENvbnRlbnQnICk7XG59O1xuXG4vKipcbiAqIEdldHMgZWRpdG9yIGZvcm0gdXBkYXRlIGJ1dHRvblxuICogQHJldHVybiB7T2JqZWN0fSBDb250ZW50IGZvcm0gZWxlbWVudFxuICovXG5oZWxwZXJzLmdldEVkaXRvclVwZGF0ZUJ0bkVsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2VkaXRVcGRhdGVCdG4nICk7XG59O1xuIiwiLyoqXG4gKiBNb2RlbCBmaWxlIGZvciB3b3JraW5nIHdpdGggZGF0YVxuICovXG5cbi8qKlxuICogTWFpbiBNb2RlbCBPYmplY3RcbiAqXG4gKi9cbnZhciBtb2RlbCA9IHt9O1xuXG4vKipcbiAqIEluaXRpYWxpemVzIHRoZSBNb2RlbFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbm1vZGVsLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICBpZiggZmFsc2UgPT09IG1vZGVsLmNoZWNrTG9jYWxTdG9yZSgpICkge1xuICAgICAgbW9kZWwudXBkYXRlTG9jYWxTdG9yZSggZGF0YSApO1xuICB9XG5cbn07XG5cblxuLyoqXG4gKiBHZXQgYSBzaW5nbGUgcG9zdCBvciBwYWdlIGJhc2VkIG9uIHRoZSB1cmwgc2x1Z1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzbHVnIFRoZSBzbHVnIGZvciB0aGUgcG9zdFxuICogQHJldHVybiB7T2JqZWN0fSBjb250ZW50T2JqIFNpbmdsZSBwb3N0IG9yIHBhZ2VcbiAqXG4gKi9cbm1vZGVsLmdldENvbnRlbnQgPSBmdW5jdGlvbiggc2x1ZyApIHtcblxuICB2YXIgY29udGVudE9iaiA9IG1vZGVsLmdldFBvc3QoIHNsdWcgKTtcblxuXG4gIC8vIElmIHBvc3QgaXMgbm90IGZvdW5kLCBzZWFyY2ggcGFnZXNcbiAgaWYoIG51bGwgPT09IGNvbnRlbnRPYmogKSB7XG4gICAgY29udGVudE9iaiA9IG1vZGVsLmdldFBhZ2UoIHNsdWcgKTtcbiAgfVxuXG4gIC8vIElmIHBhZ2Ugbm90IGZvdW5kLCBhc3NpZ24gNDA0IGVycm9yXG4gIGlmKCBudWxsID09PSBjb250ZW50T2JqICkge1xuICAgIGNvbnRlbnRPYmogPSB7XG4gICAgICAgIHRpdGxlOiAnNDA0IEVycm9yJyxcbiAgICAgICAgY29udGVudDogJ0NvbnRlbnQgbm90IGZvdW5kJ1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gY29udGVudE9iajtcblxufTtcblxuXG4vKipcbiAqIEdldCBhIHNpbmdsZSBwb3N0IG9yIHBhZ2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgdXJsXG4gKlxuICogQHJldHVybiB7T2JqZWN0fSBjb250ZW50T2JqIFNpbmdsZSBwb3N0IG9yIHBhZ2VcbiAqXG4gKi9cbm1vZGVsLmdldEN1cnJlbnRDb250ZW50ID0gZnVuY3Rpb24oKSB7XG5cbiAgdmFyIHNsdWcgPSByb3V0ZXIuZ2V0U2x1ZygpLFxuICAgICAgY29udGVudE9iaiA9IG1vZGVsLmdldENvbnRlbnQoIHNsdWcgKTtcblxuICByZXR1cm4gY29udGVudE9iajtcblxufTtcblxuXG4vKipcbiAqIEdldHMgcG9zdHMgZnJvbSBsb2NhbCBzdG9yZVxuICpcbiAqIEByZXR1cm4ge09iamVjdFtdfSBwb3N0cyBBcnJheSBvZiBwb3N0c1xuICovXG5tb2RlbC5nZXRQb3N0cyA9IGZ1bmN0aW9uKCkge1xuXG4gIHZhciBwb3N0cyA9IG1vZGVsLmdldExvY2FsU3RvcmUoKS5wb3N0cztcbiAgcmV0dXJuIHBvc3RzO1xuXG59O1xuXG4vKipcbiAqIEdldCBhIHNpbmdsZSBwb3N0IGJhc2VkIG9uIHVybCBzbHVnXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHNsdWcgVGhlIHNsdWcgZm9yIHRoZSBwb3N0XG4gKiBAcmV0dXJuIHtPYmplY3R9IHBvc3QgU2luZ2xlIHBvc3RcbiAqXG4gKi9cbm1vZGVsLmdldFBvc3QgPSBmdW5jdGlvbiggc2x1ZyApIHtcblxuICB2YXIgcG9zdHMgPSBtb2RlbC5nZXRMb2NhbFN0b3JlKCkucG9zdHM7XG5cbiAgLy8gR2V0IHRoZSBwb3N0IGZyb20gc3RvcmUgYmFzZWQgb24gdGhlIHNsdWdcbiAgZm9yKCBpID0gMCwgbWF4ID0gcG9zdHMubGVuZ3RoOyBpIDwgbWF4OyBpKysgICkge1xuXG4gICAgaWYoIHNsdWcgPT09IHBvc3RzW2ldLnNsdWcgKSB7XG4gICAgICByZXR1cm4gcG9zdHNbaV07XG4gICAgfVxuXG4gIH1cblxuICByZXR1cm4gbnVsbDtcblxufTtcblxuLyoqXG4gKiBHZXRzIHBhZ2VzIGZyb20gbG9jYWwgc3RvcmVcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3RbXX0gcGFnZXMgQXJyYXkgb2YgcGFnZSBvYmplY3RzXG4gKi9cbm1vZGVsLmdldFBhZ2VzID0gZnVuY3Rpb24oKSB7XG5cbiAgdmFyIHBhZ2VzID0gbW9kZWwuZ2V0TG9jYWxTdG9yZSgpLnBhZ2VzO1xuICByZXR1cm4gcGFnZXM7XG5cbn07XG5cbi8qKlxuICogR2V0IGEgc2luZ2xlIHBhZ2UgYmFzZWQgb24gdXJsIHNsdWdcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc2x1ZyBUaGUgc2x1ZyBmb3IgdGhlIHBhZ2VcbiAqIEByZXR1cm4ge09iamVjdH0gcGFnZSAgU2luZ2xlIHBhZ2Ugb2JqZWN0XG4gKlxuICovXG5tb2RlbC5nZXRQYWdlID0gZnVuY3Rpb24oIHNsdWcgKSB7XG5cbiAgdmFyIHBhZ2VzID0gbW9kZWwuZ2V0TG9jYWxTdG9yZSgpLnBhZ2VzO1xuXG4gIGlmKCBudWxsID09PSBzbHVnICkgc2x1ZyA9ICdob21lJztcblxuICAvLyBHZXQgdGhlIHBvc3QgZnJvbSBzdG9yZSBiYXNlZCBvbiB0aGUgc2x1Z1xuICBmb3IoIGkgPSAwLCBtYXggPSBwYWdlcy5sZW5ndGg7IGkgPCBtYXg7IGkrKyAgKSB7XG5cbiAgIGlmKCBzbHVnID09PSBwYWdlc1tpXS5zbHVnICkge1xuICAgICByZXR1cm4gcGFnZXNbaV07XG4gICB9XG5cbiAgfVxuXG4gIHJldHVybiBudWxsO1xuXG59O1xuXG5cbi8qKlxuICogVXBkYXRlcyBwb3N0IG9yIHBhZ2UgaW4gbG9jYWwgc3RvcmVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGVudE9iaiBDb250ZW50IG9iamVjdCB0byB1cGRhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5tb2RlbC51cGRhdGVDb250ZW50ID0gZnVuY3Rpb24oIGNvbnRlbnRPYmogKSB7XG5cbiAgdmFyIHN0b3JlID0gbW9kZWwuZ2V0TG9jYWxTdG9yZSgpLFxuICAgICAgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgaWYoICdwb3N0JyA9PT0gY29udGVudE9iai50eXBlICkge1xuICAgIHN0b3JlLnBvc3RzLmZvckVhY2goIGZ1bmN0aW9uKCBwb3N0ICkge1xuICAgICAgaWYoIGNvbnRlbnRPYmouaWQgPT09IHBvc3QuaWQgKSB7XG4gICAgICAgIHBvc3QudGl0bGUgPSBjb250ZW50T2JqLnRpdGxlO1xuICAgICAgICBwb3N0LmNvbnRlbnQgPSBjb250ZW50T2JqLmNvbnRlbnQ7XG4gICAgICAgIHBvc3QubW9kaWZpZWQgPSBkYXRlLnRvSVNPU3RyaW5nKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAoICdwYWdlJyA9PT0gY29udGVudE9iai50eXBlICkge1xuICAgIHN0b3JlLnBhZ2VzLmZvckVhY2goIGZ1bmN0aW9uKCBwYWdlICkge1xuICAgICAgaWYoIGNvbnRlbnRPYmouaWQgPT09IHBhZ2UuaWQgKSB7XG4gICAgICAgIHBhZ2UudGl0bGUgPSBjb250ZW50T2JqLnRpdGxlO1xuICAgICAgICBwYWdlLmNvbnRlbnQgPSBjb250ZW50T2JqLmNvbnRlbnQ7XG4gICAgICAgIHBhZ2UubW9kaWZpZWQgPSBkYXRlLnRvSVNPU3RyaW5nKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuXG4gIG1vZGVsLnVwZGF0ZUxvY2FsU3RvcmUoIHN0b3JlICk7XG5cbn07XG5cblxuLyoqXG4gKiBVcGRhdGVzIGlmIGVkaXRvciBpcyBoaWRkZW5cbiAqXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzSGlkZGVuIElmIGVkaXRvciBpcyBoaWRkZW4gb3Igbm90XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xubW9kZWwudXBkYXRlRWRpdG9ySGlkZGVuID0gZnVuY3Rpb24oIGlzSGlkZGVuICkge1xuXG4gIHZhciBzdG9yZSA9IG1vZGVsLmdldExvY2FsU3RvcmUoKTtcblxuICBzdG9yZS5zZXR0aW5ncy5lZGl0b3JIaWRkZW4gPSBpc0hpZGRlbjtcbiAgbW9kZWwudXBkYXRlTG9jYWxTdG9yZSggc3RvcmUgKTtcblxufTtcblxuLyoqXG4gKiBHZXRzIGxvY2FsIHN0b3JlIHNldHRpbmcgZm9yIGlmIGVkaXRvciBpcyBoaWRkZW5cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufSBoaWRkZW4gQSBib29sZWFuIGZvciBpZiBlZGl0b3IgaXMgaGlkZGVuXG4gKi9cbm1vZGVsLmdldEVkaXRvckhpZGRlbiA9IGZ1bmN0aW9uKCkge1xuXG4gIHZhciBzdG9yZSA9IG1vZGVsLmdldExvY2FsU3RvcmUoKTtcblxuICByZXR1cm4gc3RvcmUuc2V0dGluZ3MuZWRpdG9ySGlkZGVuO1xuXG59O1xuXG4vKipcbiAqIENoZWNrcyBpZiBsb2NhbCBzdG9yZSBhbHJlYWR5IGV4aXN0c1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59IEJvb2xlYW4gdmFsdWUgZm9yIGlmIGxvY2FsIHN0b3JlIGFscmVhZHkgZXhpc3RzXG4gKi9cbm1vZGVsLmNoZWNrTG9jYWxTdG9yZSA9IGZ1bmN0aW9uKCkge1xuXG4gIHZhciBzdG9yZSA9IG1vZGVsLmdldExvY2FsU3RvcmUoKTtcblxuICBpZiAoIG51bGwgPT09IHN0b3JlICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG59O1xuXG5cbi8qKlxuICogR2V0cyBjb250ZW50IGZyb20gbG9jYWwgc3RvcmVcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IHN0b3JlIE5hdGl2ZSBKYXZhU2NyaXB0IG9iamVjdCBmcm9tIGxvY2FsIHN0b3JlXG4gKi9cbm1vZGVsLmdldExvY2FsU3RvcmUgPSBmdW5jdGlvbigpIHtcblxuICB2YXIgc3RvcmUgPSBKU09OLnBhcnNlKCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSggJ3ZhbmlsbGFQcmVzcycgKSApO1xuXG4gIHJldHVybiBzdG9yZTtcblxufTtcblxuLyoqXG4gKiBTYXZlcyB0ZW1wb3Jhcnkgc3RvcmUgdG8gbG9jYWwgc3RvcmFnZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc3RvcmUgTmF0aXZlIEphdmFTY3JpcHQgb2JqZWN0IHdpdGggc2l0ZSBkYXRhXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xubW9kZWwudXBkYXRlTG9jYWxTdG9yZSA9IGZ1bmN0aW9uKCBzdG9yZSApIHtcblxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSggJ3ZhbmlsbGFQcmVzcycsIEpTT04uc3RyaW5naWZ5KCBzdG9yZSApICk7XG5cbn07XG5cbi8qKlxuICogRGVsZXRlcyBkYXRhIGZyb20gbG9jYWwgc3RvcmFnZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbm1vZGVsLnJlbW92ZUxvY2FsU3RvcmUgPSBmdW5jdGlvbigpIHtcblxuICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSggJ3ZhbmlsbGFQcmVzcycgKTtcblxufTtcbiIsIi8qKlxuICogUm91dGVyIGZpbGUgZm9yIG1hbmFnaW5nIHVybCBjaGFuZ2VzXG4gKi9cblxuLyoqXG4gKiBUaGUgbWFpbiByb3V0ZXIgb2JqZWN0LlxuICpcbiAqL1xudmFyIHJvdXRlciA9IHt9O1xuXG4vKipcbiAqIEluaXRpYWxpemVzIHRoZSBSb3V0ZXJcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5yb3V0ZXIuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gIHJvdXRlci5sb2FkQ29udGVudCgpO1xuICByb3V0ZXIubGlzdGVuUGFnZUNoYW5nZSgpO1xuXG59O1xuXG4vKipcbiAqIEdldHMgdGhlIHNsdWcgZnJvbSB0aGUgVVJMXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBzbHVnIFNsdWcgZnJvbSBVUkxcbiAqL1xucm91dGVyLmdldFNsdWcgPSBmdW5jdGlvbigpIHtcblxuICBzbHVnID0gd2luZG93LmxvY2F0aW9uLmhhc2g7XG5cbiAgaWYoIFwiXCIgPT09IHNsdWcgKSB7XG5cbiAgICByZXR1cm4gbnVsbDtcblxuICB9IGVsc2Uge1xuXG4gICAgcmV0dXJuIHNsdWcuc3Vic3RyKCAxICk7XG5cbiAgfVxuXG59O1xuXG4vKipcbiAqIExpc3RlbmVyIGZ1bmN0aW9uIGZvciBVUkwgY2hhbmdlc1xuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbnJvdXRlci5saXN0ZW5QYWdlQ2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdoYXNoY2hhbmdlJywgcm91dGVyLmxvYWRDb250ZW50LCBmYWxzZSApO1xuXG59O1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRvIGxvYWQgYmxvZyBwb3N0c1xuICogb3Igc2luZ2xlIHBvc3RcbiAqXG4gKi9cblxucm91dGVyLmxvYWRDb250ZW50ID0gZnVuY3Rpb24oKSB7XG5cbiAgdmFyIHVybCA9IHJvdXRlci5nZXRTbHVnKCksXG4gICAgICBjb250ZW50T2JqID0gbW9kZWwuZ2V0Q29udGVudCggdXJsICksXG4gICAgICBlZGl0b3JFbCA9IGhlbHBlcnMuZ2V0RWRpdG9yRWwoKTtcblxuICB2aWV3LmNsZWFyQ29udGVudCgpO1xuXG4gIGlmKCBudWxsID09PSB1cmwgKSB7XG5cbiAgICB2aWV3LmxvYWRTaW5nbGVDb250ZW50KCAnaG9tZScgKTtcblxuICB9IGVsc2UgaWYoICdibG9nJyA9PT0gdXJsICkge1xuXG4gICAgdmlldy5sb2FkQmxvZ1Bvc3RzKCk7XG5cbiAgfSBlbHNlIHtcblxuICAgIHZpZXcubG9hZFNpbmdsZUNvbnRlbnQoIHVybCApO1xuXG4gIH1cblxuICBlZGl0b3IuY3VycmVudENvbnRlbnQgPSBjb250ZW50T2JqO1xuICBpZiggZmFsc2UgPT09IGVkaXRvckVsLmNsYXNzTGlzdC5jb250YWlucyggJ2hpZGRlbicgKSApIHtcblxuICAgIGVkaXRvci5sb2FkRWRpdEZvcm0oIGVkaXRvci5jdXJyZW50Q29udGVudCApO1xuXG4gIH1cblxufTtcbiIsIi8qKlxuICogVmlldyBmaWxlIGZvciBkaXNwbGF5aW5nIGNvbnRlbnRcbiAqL1xuXG5cbi8qKlxuICogTWFpbiB2aWV3IG9iamVjdFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbnZhciB2aWV3ID0ge307XG5cblxuLyoqXG4gKiBDYWxscyBpbml0aWFsIFZpZXcgbWV0aG9kc1xuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbnZpZXcuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gIHZpZXcuY3JlYXRlTWFpbk1lbnUoKTtcblxufTtcblxuXG4vKipcbiAqIEdldHMgYmxvZyBwb3N0cyBhbmQgYXBwZW5kcyB0aGVtIHRvIHRoZSBwYWdlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xudmlldy5sb2FkQmxvZ1Bvc3RzID0gZnVuY3Rpb24oKSB7XG5cbiAgdmFyIHBvc3RzID0gbW9kZWwuZ2V0UG9zdHMoKSxcbiAgICAgIHBvc3RzTWFya3VwID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgdGl0bGVFbCA9IGhlbHBlcnMuZ2V0UGFnZVRpdGxlRWwoKSxcbiAgICAgIGNvbnRlbnRFbCA9IGhlbHBlcnMuZ2V0UGFnZUNvbnRlbnRFbCgpLFxuXHQgaSxcblx0IG1heDtcblxuXG4gIGZvciAoIGkgPSAwLCBtYXggPSBwb3N0cy5sZW5ndGg7IGkgPCBtYXg7IGkrKyApIHtcbiAgICBwb3N0c01hcmt1cC5hcHBlbmRDaGlsZCggdmlldy5jcmVhdGVQb3N0TWFya3VwKCBwb3N0c1tpXSApICk7XG4gIH1cblxuICBjb250ZW50RWwuYXBwZW5kQ2hpbGQoIHBvc3RzTWFya3VwICk7XG4gIHRpdGxlRWwuaW5uZXJIVE1MID0gJ0Jsb2cgUG9zdHMnO1xuXG59O1xuXG5cbi8qKlxuICogRGlzcGxheXMgYSBzaW5nbGUgcG9zdCBvciBwYWdlIGJhc2VkIG9uIFVSTFxuICogQHBhcmFtIHtTdHJpbmd9IHNsdWcgVGhlIHVybCBzbHVnIG9mIHRoZSBwb3N0IG9yIHBhZ2VcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG4gdmlldy5sb2FkU2luZ2xlQ29udGVudCA9IGZ1bmN0aW9uKCBzbHVnICkge1xuXG4gICB2YXIgY29udGVudE9iaiA9IG1vZGVsLmdldENvbnRlbnQoIHNsdWcgKSxcbiAgICAgICB0aXRsZUVsID0gaGVscGVycy5nZXRQYWdlVGl0bGVFbCgpLFxuICAgICAgIGNvbnRlbnRFbCA9IGhlbHBlcnMuZ2V0UGFnZUNvbnRlbnRFbCgpO1xuXG5cbiAgIHRpdGxlRWwuaW5uZXJIVE1MID0gY29udGVudE9iai50aXRsZTtcbiAgIGNvbnRlbnRFbC5pbm5lckhUTUwgPSBjb250ZW50T2JqLmNvbnRlbnQ7XG5cbiB9O1xuXG5cbi8qKlxuKiBVcGRhdGVzIHRoZSBtYWluIHRpdGxlIGFuZCBjb250ZW50IGZvciBhIHBhZ2Ugb3IgcG9zdFxuKiBAcGFyYW0ge09iamVjdH0gY29udGVudE9iaiBUaGUgcG9zdCBvciBwYWdlIG9iamVjdFxuKiBAcmV0dXJucyB7dm9pZH1cbiovXG52aWV3LnVwZGF0ZVRpdGxlQW5kQ29udGVudCA9IGZ1bmN0aW9uKCBjb250ZW50T2JqICkge1xuXG4gIHZpZXcudXBkYXRlVGl0bGUoIGNvbnRlbnRPYmoudGl0bGUgKTtcbiAgdmlldy51cGRhdGVDb250ZW50KCBjb250ZW50T2JqLmNvbnRlbnQgKTtcblxufTtcblxuLyoqXG4qIFVwZGF0ZXMgdGhlIG1haW4gdGl0bGUgZm9yIGEgcGFnZSBvciBwb3N0XG4qIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSBUaGUgdGl0bGUgZm9yIGEgcG9zdCBvciBwYWdlXG4qIEByZXR1cm5zIHt2b2lkfVxuKi9cbnZpZXcudXBkYXRlVGl0bGUgPSBmdW5jdGlvbiggdGl0bGUgKSB7XG5cbiAgdmFyIHRpdGxlRWwgPSBoZWxwZXJzLmdldFBhZ2VUaXRsZUVsKCk7XG5cbiAgdGl0bGVFbC5pbm5lckhUTUwgPSB0aXRsZTtcblxufTtcblxuXG4vKipcbiogVXBkYXRlcyB0aGUgbWFpbiBjb250ZW50IGZvciBhIHBhZ2Ugb3IgcG9zdFxuKiBAcGFyYW0ge1N0cmluZ30gY29udGVudCBUaGUgY29udGVudCBmb3IgYSBwb3N0IG9yIHBhZ2VcbiogQHJldHVybnMge3ZvaWR9XG4qL1xudmlldy51cGRhdGVDb250ZW50ID0gZnVuY3Rpb24oIGNvbnRlbnQgKSB7XG5cbiAgdmFyIGNvbnRlbnRFbCA9IGhlbHBlcnMuZ2V0UGFnZUNvbnRlbnRFbCgpO1xuXG4gIGNvbnRlbnRFbC5pbm5lckhUTUwgPSBjb250ZW50O1xuXG59O1xuXG5cbi8qKlxuICogQ2xlYXJzIHRoZSBwYWdlIHRpdGxlIGFuZCBjb250ZW50IGZyb20gdGhlIHBhZ2VcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG52aWV3LmNsZWFyQ29udGVudCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdGl0bGVFbCA9IGhlbHBlcnMuZ2V0UGFnZVRpdGxlRWwoKSxcbiAgICAgIGNvbnRlbnRFbCA9IGhlbHBlcnMuZ2V0UGFnZUNvbnRlbnRFbCgpO1xuXG4gIHRpdGxlRWwuaW5uZXJIVE1MID0gJyc7XG4gIGNvbnRlbnRFbC5pbm5lckhUTUwgPSAnJztcbn07XG5cblxuLyoqXG4gKiBDcmVhdGVzIE1haW4gTWVudSBMaW5rcyBmb3IgUGFnZXNcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG4gdmlldy5jcmVhdGVNYWluTWVudSA9IGZ1bmN0aW9uKCkge1xuXG4gICB2YXIgcGFnZXMgPSBtb2RlbC5nZXRQYWdlcygpLFxuICAgICAgIG1lbnVNYXJrdXAgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICAgbWFpbk1lbnVFbCA9IGhlbHBlcnMuZ2V0TWFpbk1lbnVFbCgpLFxuXHQgIGksXG5cdCAgbWF4O1xuXG4gICBmb3IgKCBpID0gMCwgbWF4ID0gcGFnZXMubGVuZ3RoOyBpIDwgbWF4OyBpKysgKSB7XG4gICAgIC8vIENyZWF0ZSBtZW51IG1hcmt1cFxuICAgICBtZW51TWFya3VwLmFwcGVuZENoaWxkKCBoZWxwZXJzLmNyZWF0ZU1lbnVJdGVtKCBwYWdlc1tpXSApICk7XG4gICB9XG5cbiAgIG1haW5NZW51RWwuYXBwZW5kQ2hpbGQoIG1lbnVNYXJrdXAgKTtcblxuIH07XG5cblxuLyoqXG4gKiBDcmVhdGVzIE1hcmt1cCBmb3IgQmxvZyBQb3N0c1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwb3N0IFBvc3QgdG8gY3JlYXRlIG1hcmt1cCBmb3JcbiAqIEByZXR1cm4ge09iamVjdH0gYXJ0aWNsZUVsIEZpbmFsIHBvc3QgbWFya3VwXG4gKi9cbnZpZXcuY3JlYXRlUG9zdE1hcmt1cCA9IGZ1bmN0aW9uKCBwb3N0ICkge1xuXG4gIHZhciBhcnRpY2xlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnYXJ0aWNsZScgKSxcbiAgICAgIHRpdGxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnaDMnICksXG4gICAgICB0aXRsZUxpbmsgPSBoZWxwZXJzLmNyZWF0ZUxpbmsoIHBvc3QgKSxcbiAgICAgIGNvbnRlbnRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XG5cbiAgdGl0bGVFbC5hcHBlbmRDaGlsZCggdGl0bGVMaW5rICk7XG4gIGNvbnRlbnRFbC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIHBvc3QuY29udGVudCApICk7XG5cbiAgYXJ0aWNsZUVsLmFwcGVuZENoaWxkKCB0aXRsZUVsICk7XG4gIGFydGljbGVFbC5hcHBlbmRDaGlsZCggY29udGVudEVsICk7XG5cbiAgcmV0dXJuIGFydGljbGVFbDtcblxufTtcbiIsIi8qKlxuICogQ29kZSBmb3IgdGhlIEVkaXRvclxuICovXG5cblxuLyoqXG4gKiBUaGUgbWFpbiBFZGl0b3Igb2JqZWN0XG4gKlxuICovXG52YXIgZWRpdG9yID0ge307XG5cbmVkaXRvci5jdXJyZW50Q29udGVudCA9ICcnO1xuZWRpdG9yLnVuU2F2ZWRDb250ZW50ID0gZmFsc2U7XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIFZhbmlsbGFQcmVzcyBhcHBcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5lZGl0b3IuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gIGVkaXRvci5saXN0ZW5FZGl0b3JUb2dnbGUoKTtcbiAgZWRpdG9yLmNoZWNrRWRpdG9ySGlkZGVuKCk7XG5cbn07XG5cblxuLyoqXG4gKiBVcGRhdGVzIGxvY2FsIHN0b3JhZ2UgZm9yIHBvc3Qgb3IgcGFnZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmVkaXRvci51cGRhdGVDb250ZW50ID0gZnVuY3Rpb24oKSB7XG5cbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgbW9kZWwudXBkYXRlQ29udGVudCggZWRpdG9yLmN1cnJlbnRDb250ZW50ICk7XG4gIGVkaXRvci51blNhdmVkQ29udGVudCA9IGZhbHNlO1xuICBlZGl0b3IuYW5pbWF0ZVNhdmVCdG4oKTtcblxufTtcblxuXG4vKipcbiAqIFJ1bnMgd2hlbiBjaGFuZ2VzIHRha2UgcGxhY2UgdG8gZWRpdG9yIHRpdGxlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZWRpdG9yLnVwZGF0ZVRpdGxlID0gZnVuY3Rpb24oKSB7XG5cbiAgdmFyIHRpdGxlID0gaGVscGVycy5nZXRFZGl0b3JUaXRsZUVsKCkudmFsdWU7XG5cbiAgZWRpdG9yLmN1cnJlbnRDb250ZW50LnRpdGxlID0gdGl0bGU7XG4gIGVkaXRvci51blNhdmVkQ29udGVudCA9IHRydWU7XG4gIHZpZXcudXBkYXRlVGl0bGUoIHRpdGxlICk7XG5cbn07XG5cblxuLyoqXG4gKiBSdW5zIHdoZW4gY2hhbmdlcyB0YWtlIHBsYWNlIHRvIGVkaXRvciB0aXRsZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmVkaXRvci51cGRhdGVNYWluQ29udGVudCA9IGZ1bmN0aW9uKCkge1xuXG4gIHZhciBjb250ZW50ID0gaGVscGVycy5nZXRFZGl0b3JDb250ZW50RWwoKS52YWx1ZTtcblxuICBlZGl0b3IuY3VycmVudENvbnRlbnQuY29udGVudCA9IGNvbnRlbnQ7XG4gIGVkaXRvci51blNhdmVkQ29udGVudCA9IHRydWU7XG4gIHZpZXcudXBkYXRlQ29udGVudCggY29udGVudCApO1xuXG59O1xuXG5cbi8qKlxuICogRHluYW1pY2FsbHkgZmlsbHMgdGhlIGVkaXQgZm9ybSBiYXNlZCBvbiB0aGUgdXJsXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGVudE9iaiBUaGUgb2JqZWN0IG9mIHBvc3Qgb3IgcGFnZSB0byBsb2FkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZWRpdG9yLmxvYWRFZGl0Rm9ybSA9IGZ1bmN0aW9uKCBjb250ZW50T2JqICkge1xuXG4gIHZhciB0aXRsZUZvcm0gPSBoZWxwZXJzLmdldEVkaXRvclRpdGxlRWwoKSxcbiAgICAgIGNvbnRlbnRGb3JtID0gaGVscGVycy5nZXRFZGl0b3JDb250ZW50RWwoKTtcblxuICB0aXRsZUZvcm0udmFsdWUgPSBjb250ZW50T2JqLnRpdGxlO1xuICBjb250ZW50Rm9ybS52YWx1ZSA9IGNvbnRlbnRPYmouY29udGVudDtcblxuICBpZiAoICdibG9nJyA9PT0gY29udGVudE9iai5zbHVnICkge1xuICAgIGNvbnRlbnRGb3JtLnNldEF0dHJpYnV0ZSggJ3JlYWRvbmx5JywgJ3JlYWRvbmx5JyApO1xuICB9IGVsc2Uge1xuICAgIGNvbnRlbnRGb3JtLnJlbW92ZUF0dHJpYnV0ZSggJ3JlYWRvbmx5JyApO1xuICB9XG5cbiAgZWRpdG9yLmFkZEZvcm1MaXN0ZW5lcnMoKTtcblxufTtcblxuXG4vKipcbiAqIEFuaW1hdGVzIHRoZSBVcGRhdGUgYnV0dG9uIHRvIG1pbWljIHNhdmluZyBkYXRhXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZWRpdG9yLmFuaW1hdGVTYXZlQnRuID0gZnVuY3Rpb24oKSB7XG5cbiAgdmFyIGJ0biA9IGhlbHBlcnMuZ2V0RWRpdG9yVXBkYXRlQnRuRWwoKSxcbiAgICAgIHNhdmVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICBidG4uaW5uZXJUZXh0ID0gJ1VwZGF0ZSc7XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgfTtcbiAgICAgIHNhdmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYnRuLmlubmVyVGV4dCA9ICdTYXZlZCEnO1xuICAgICAgICAgIHNhdmVkKCk7XG4gICAgICAgIH0sIDkwMCk7XG4gICAgICB9O1xuXG4gIGJ0bi5pbm5lclRleHQgPSAnU2F2aW5nLi4uJztcbiAgc2F2aW5nKCk7XG5cbn07XG5cbi8qKlxuICogQWRkcyBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSB0aXRsZSBhbmQgY29udGVudFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbiBlZGl0b3IuYWRkRm9ybUxpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xuXG4gICB2YXIgdGl0bGVGaWVsZCA9IGhlbHBlcnMuZ2V0RWRpdG9yVGl0bGVFbCgpLFxuICAgICAgIGNvbnRlbnRGaWVsZCA9IGhlbHBlcnMuZ2V0RWRpdG9yQ29udGVudEVsKCksXG4gICAgICAgdXBkYXRlQnRuID0gaGVscGVycy5nZXRFZGl0b3JVcGRhdGVCdG5FbCgpLFxuICAgICAgIGxpbmtzID0gaGVscGVycy5nZXRMaW5rcygpO1xuXG4gICB0aXRsZUZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICdpbnB1dCcsXG4gICAgIGVkaXRvci51cGRhdGVUaXRsZSxcbiAgICAgZmFsc2VcbiAgICk7XG4gICBjb250ZW50RmllbGQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgJ2lucHV0JyxcbiAgICAgZWRpdG9yLnVwZGF0ZU1haW5Db250ZW50LFxuICAgICBmYWxzZVxuICAgKTtcbiAgIHVwZGF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAnY2xpY2snLFxuICAgICBlZGl0b3IudXBkYXRlQ29udGVudCxcbiAgICAgZmFsc2VcbiAgICk7XG5cblxuICAgbGlua3MuZm9yRWFjaCggZnVuY3Rpb24oIGxpbmsgKSB7XG5cbiAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICdjbGljaycsXG4gICAgICAgZWRpdG9yLnByb3RlY3RVbnNhdmVkQ29udGVudCxcbiAgICAgICBmYWxzZVxuICAgICApO1xuXG4gICB9KTtcblxuIH07XG5cblxuLyoqXG4gKiBBZGRzIGFsZXJ0IGlmIGxpbmtzIGFyZSBjbGlja2VkIHdpdGggdW5zYXZlZCBjb250ZW50XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZWRpdG9yLnByb3RlY3RVbnNhdmVkQ29udGVudCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgY29uZmlybTtcblxuICBpZiAoIHRydWUgPT09IGVkaXRvci51blNhdmVkQ29udGVudCApIHtcblxuICAgIGNvbmZpcm0gPSB3aW5kb3cuY29uZmlybSggJ1lvdSBoYXZlIHVuc2F2ZWQgY29udGVudCcgKTtcblxuICAgIGlmICggZmFsc2UgPT09IGNvbmZpcm0gKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlZGl0b3IudW5TYXZlZENvbnRlbnQgPSBmYWxzZTtcbiAgICB9XG5cbiAgfVxuXG59O1xuXG4vKipcbiAqIExpc3RlbnMgZm9yIHRoZSBlZGl0b3IgdG9nZ2xlIGJ1dHRvblxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmVkaXRvci5saXN0ZW5FZGl0b3JUb2dnbGUgPSBmdW5jdGlvbigpIHtcblxuICB2YXIgdG9nZ2xlRWwgPSBoZWxwZXJzLmdldEVkaXRvclRvZ2dsZUxpbmsoKTtcblxuICB0b2dnbGVFbC5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBlZGl0b3IudG9nZ2xlKCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfSwgZmFsc2UgKTtcblxufTtcblxuXG4vKipcbiAqIE9wZW5zIGVkaXRvciBpZiBsb2NhbCBzdG9yZSBoYXMgZWRpdG9yIHZpc2libGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5lZGl0b3IuY2hlY2tFZGl0b3JIaWRkZW4gPSBmdW5jdGlvbigpIHtcblxuICB2YXIgaXNIaWRkZW4gPSBtb2RlbC5nZXRFZGl0b3JIaWRkZW4oKTtcblxuICBpZiggZmFsc2UgPT09IGlzSGlkZGVuICkge1xuICAgIGVkaXRvci50b2dnbGUoKTtcbiAgfVxuXG59O1xuXG4vKipcbiAqIENvbnRyb2xzIHRoZSB0b2dnbGUgZm9yIHRoZSBlZGl0b3JcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5lZGl0b3IudG9nZ2xlID0gZnVuY3Rpb24oKSB7XG5cbiAgdmFyIGVkaXRvckVsID0gaGVscGVycy5nZXRFZGl0b3JFbCgpLFxuICAgICAgdG9nZ2xlRWwgPSBoZWxwZXJzLmdldEVkaXRvclRvZ2dsZUVsKCksXG4gICAgICBsaW5rcyA9IGhlbHBlcnMuZ2V0TGlua3MoKTtcblxuICBlZGl0b3IuY3VycmVudENvbnRlbnQgPSBtb2RlbC5nZXRDdXJyZW50Q29udGVudCgpO1xuXG4gIGVkaXRvckVsLmNsYXNzTGlzdC50b2dnbGUoICdoaWRkZW4nICk7XG4gIHRvZ2dsZUVsLmNsYXNzTGlzdC50b2dnbGUoICdoaWRkZW4nICk7XG5cbiAgaWYoIGZhbHNlID09PSB0b2dnbGVFbC5jbGFzc0xpc3QuY29udGFpbnMoICdoaWRkZW4nICkgKSB7XG5cbiAgICBlZGl0b3IubG9hZEVkaXRGb3JtKCBlZGl0b3IuY3VycmVudENvbnRlbnQgKTtcbiAgICBtb2RlbC51cGRhdGVFZGl0b3JIaWRkZW4oIGZhbHNlICk7XG5cbiAgfSBlbHNlIHtcblxuICAgIG1vZGVsLnVwZGF0ZUVkaXRvckhpZGRlbiggdHJ1ZSApO1xuXG4gICAgbGlua3MuZm9yRWFjaCggZnVuY3Rpb24oIGxpbmsgKSB7XG5cbiAgICAgIGxpbmsucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgZWRpdG9yLnByb3RlY3RVbnNhdmVkQ29udGVudCxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG5cbiAgICB9KTtcblxuICB9XG5cbn07XG4iLCIvKipcbiAqIE1haW4gYXBwIGZpbGUuICBJbml0aWFsaXplcyBhcHAgY29tcG9uZW50cy5cbiAqL1xuXG5cbi8qKlxuICogVGhlIG1haW4gYXBwIG9iamVjdC5cbiAqXG4gKi9cbnZhciB2YW5pbGxhUHJlc3MgPSB7fTtcblxuXG4vKipcbiAqIEluaXRpYWxpemVzIHRoZSBWYW5pbGxhUHJlc3MgYXBwXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG52YW5pbGxhUHJlc3MuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gIG1vZGVsLmluaXQoKTtcbiAgcm91dGVyLmluaXQoKTtcbiAgdmlldy5pbml0KCk7XG4gIGVkaXRvci5pbml0KCk7XG4gIGNvbnNvbGUubG9nKCAnVGVzdGluZyAyJyApO1xuXG59O1xuXG52YW5pbGxhUHJlc3MuaW5pdCgpO1xuIl19
